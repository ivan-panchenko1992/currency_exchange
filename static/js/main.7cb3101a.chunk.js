(this.webpackJsonpcurrency_exchange=this.webpackJsonpcurrency_exchange||[]).push([[0],{13:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),i=n(7),s=n.n(i),o=(n(13),n(2)),r=n(3),d=n.n(r),u=n(8),h=n.n(u),l=function(e){return fetch(e).then((function(e){return e.json()})).catch((function(){return new Error("failed download")}))},j="https://involve.software/test_front/api",b=function(e,t,n,c){var a=h.a.stringify({base:t,amount:c,invoicePayMethod:e,withdrawPayMethod:n});return l("".concat(j).concat("/payMethods/calculate?").concat(a))},m=function(e,t,n,c){var a;return a={amount:e,base:t,invoicePayMethod:n,withdrawPayMethod:c},fetch("".concat(j,"/bids"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).catch((function(e){return console.log(e)}))},f=n.p+"static/media/Vector.a167a025.svg",O=n(0),v=a.a.memo((function(e){var t=e.reset;return Object(O.jsxs)("form",{className:"success-page",children:[Object(O.jsx)("img",{alt:"success",src:f}),Object(O.jsx)("h1",{className:"success-page__heading",children:"Success!"}),Object(O.jsxs)("p",{className:"success-page__text",children:["Your exchange order has been placed",Object(O.jsx)("br",{}),"successfully and will be processed soon."]}),Object(O.jsx)("button",{type:"button",className:"success-page__button",onClick:function(){return t()},children:"Home"})]})})),w=function(e){var t=e.invoiceValue,n=e.withdrawValue,a=e.invoicePayMethod,i=e.withdrawPayMethod,s=e.invoicePayMethodId,r=e.withdrawPayMethodId,u=e.setPage,h=e.payMethod,l=e.reset,j=Object(c.useState)(!1),b=Object(o.a)(j,2),f=b[0],v=b[1],w=a.find((function(e){return e.id===s})),x=i.find((function(e){return e.id===r}));return Object(O.jsxs)("div",{className:d()("card-confirmation",{"card-confirmation-loading":f}),children:[Object(O.jsx)("h1",{className:"card-confirmation__heading",children:"Details"}),Object(O.jsxs)("div",{className:"card-confirmation__invoise",children:[Object(O.jsx)("p",{className:"card-confirmation__invoise-sell",children:"Sell:"}),Object(O.jsxs)("p",{className:"card-confirmation__invoise-quontity",children:[t," ",null===w||void 0===w?void 0:w.name]})]}),Object(O.jsxs)("div",{className:"card-confirmation__withdraw",children:[Object(O.jsx)("p",{className:"card-confirmation__withdraw-buy",children:"Buy:"}),Object(O.jsxs)("p",{className:"card-confirmation__withdraw-quontity",children:[n," ",null===x||void 0===x?void 0:x.name]})]}),Object(O.jsxs)("div",{className:"card-confirmation__button",children:[Object(O.jsx)("button",{type:"button",disabled:f,className:"card-confirmation__button-cancel",onClick:function(){return l()},children:"Cancel"}),Object(O.jsx)("button",{type:"button",disabled:f,className:"card-confirmation__button-confirme",onClick:function(){return v(!0),"invoice"===h&&m(t,h,s,r).then((function(e){"Success"===e.message&&(v(!1),u("success"))})),void("withdraw"===h&&m(n,h,s,r).then((function(e){"Success"===e.message&&(v(!1),u("success"))})))},children:f?"Loading...":"Confirme"})]})]})},x=function(e){var t=e.setPage,n=e.setInvoicePayMethodId,a=e.handleChangeValue,i=e.setWithdrawPayMethodId,s=e.invoiceValue,r=e.withdrawValue,d=e.invoicePayMethod,u=e.withdrawPayMethod,h=e.isLoading,l=Object(c.useState)(!1),j=Object(o.a)(l,2),b=j[0],m=j[1];return Object(O.jsxs)("form",{className:"form-container",onSubmit:function(e){return function(e){e.preventDefault(),""!==s&&""!==r&&(t("conferm"),m(!1)),m(!0)}(e)},noValidate:!0,children:[Object(O.jsxs)("div",{className:"card-container",children:[Object(O.jsxs)("div",{className:"card-exchange",children:[Object(O.jsx)("h1",{className:"card-exchange__heading",children:"Sell"}),Object(O.jsx)("select",{name:"select",className:"card-exchange__select",onChange:function(e){n(+e.target.value)},children:d.map((function(e){return Object(O.jsx)("option",{value:e.id,children:e.name},e.id)}))}),Object(O.jsx)("input",{type:"number",name:"invoice",min:"0.01",value:s,placeholder:"write your numbers",className:"card-exchange__input",onChange:function(e){return a(e)}})]}),Object(O.jsxs)("div",{className:"card-exchange",children:[Object(O.jsx)("h1",{className:"card-exchange__heading",children:"Buy"}),Object(O.jsx)("select",{name:"select",className:"card-exchange__select",onChange:function(e){return i(+e.target.value)},children:u.map((function(e){return Object(O.jsx)("option",{value:e.id,children:e.name},e.id)}))}),Object(O.jsx)("input",{type:"number",name:"withdraw",min:"0.01",value:r,placeholder:"write your numbers",className:"card-exchange__input",onChange:function(e){return a(e)}})]})]}),b&&Object(O.jsx)("p",{children:"\u274cYou forgot to enter quantity of currencies\u274c"}),Object(O.jsx)("div",{className:"button-container",children:Object(O.jsx)("button",{className:"button-container__button",type:"submit",disabled:h,children:"Exchange"})})]})},g=function(){var e=Object(c.useState)(0),t=Object(o.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(0),s=Object(o.a)(i,2),r=s[0],u=s[1],h=Object(c.useState)(""),m=Object(o.a)(h,2),f=m[0],g=m[1],p=Object(c.useState)(""),y=Object(o.a)(p,2),_=y[0],N=y[1],M=Object(c.useState)(""),P=Object(o.a)(M,2),S=P[0],C=P[1],V=Object(c.useState)([]),I=Object(o.a)(V,2),k=I[0],E=I[1],q=Object(c.useState)([]),B=Object(o.a)(q,2),J=B[0],L=B[1],T=Object(c.useState)("form"),D=Object(o.a)(T,2),W=D[0],Y=D[1],H=Object(c.useState)(!1),z=Object(o.a)(H,2),A=z[0],F=z[1];Object(c.useEffect)((function(){F(!0),l("".concat(j,"/payMethods")).then((function(e){E(e.invoice),a(e.invoice[0].id),L(e.withdraw),u(e.withdraw[0].id),F(!1)}))}),[]);var G=Object(c.useCallback)((function(){N(""),g(""),a(k[0].id),u(J[0].id),Y("form")}),[n,r]);return Object(O.jsxs)("div",{className:d()("app",{"app-loading":A}),children:["form"===W&&Object(O.jsx)(x,{invoicePayMethod:k,withdrawPayMethod:J,setPage:Y,setInvoicePayMethodId:a,handleChangeValue:function(e){var t=e.target,c=t.name,a=t.value;if(F(!0),"invoice"===c)return N(a),void(a?b(n,"invoice",r,a).then((function(e){g(String(e.amount)),C("invoice"),F(!1)})):g(""));"withdraw"===c&&(g(a),a?b(n,"withdraw",r,a).then((function(e){N(String(e.amount)),C("withdraw"),F(!1)})):N(""))},setWithdrawPayMethodId:u,withdrawValue:f,invoiceValue:_,isLoading:A}),"conferm"===W&&Object(O.jsx)(w,{withdrawValue:f,payMethod:S,invoiceValue:_,invoicePayMethod:k,withdrawPayMethod:J,invoicePayMethodId:n,withdrawPayMethodId:r,setPage:Y,reset:G}),"success"===W&&Object(O.jsx)(v,{reset:G})]})};s.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(g,{})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.7cb3101a.chunk.js.map