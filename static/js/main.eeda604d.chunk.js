(this.webpackJsonpcurrency_exchange=this.webpackJsonpcurrency_exchange||[]).push([[0],{14:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),i=n(7),s=n.n(i),o=(n(14),n(2)),r=n(8),d=n(3),u=n.n(d),l=n(9),h=n.n(l),j=function(e){return fetch(e).then((function(e){return e.json()})).catch((function(){return new Error("failed download")}))},b="https://involve.software/test_front/api",m=function(e,t,n,c){var a;return a={amount:e,base:t,invoicePayMethod:n,withdrawPayMethod:c},fetch("".concat(b,"/bids"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).catch((function(e){return console.log(e)}))},f=n.p+"static/media/Vector.a167a025.svg",O=n(0),v=a.a.memo((function(e){var t=e.reset;return Object(O.jsxs)("form",{className:"success-page",children:[Object(O.jsx)("img",{alt:"success",src:f}),Object(O.jsx)("h1",{className:"success-page__heading",children:"Success!"}),Object(O.jsxs)("p",{className:"success-page__text",children:["Your exchange order has been placed",Object(O.jsx)("br",{}),"successfully and will be processed soon."]}),Object(O.jsx)("button",{type:"button",className:"success-page__button",onClick:function(){return t()},children:"Home"})]})})),w=function(e){var t=e.invoiceValue,n=e.withdrawValue,a=e.invoicePayMethods,i=e.withdrawPayMethods,s=e.invoicePayMethodId,r=e.withdrawPayMethodId,d=e.setPage,l=e.payMethod,h=e.reset,j=Object(c.useState)(!1),b=Object(o.a)(j,2),f=b[0],v=b[1],w=a.find((function(e){return e.id===s})),x=i.find((function(e){return e.id===r}));return Object(O.jsxs)("div",{className:u()("card-confirmation",{"card-confirmation-loading":f}),children:[Object(O.jsx)("h1",{className:"card-confirmation__heading",children:"Details"}),Object(O.jsxs)("div",{className:"card-confirmation__invoise",children:[Object(O.jsx)("p",{className:"card-confirmation__invoise-sell",children:"Sell:"}),Object(O.jsxs)("p",{className:"card-confirmation__invoise-quontity",children:[t," ",null===w||void 0===w?void 0:w.name]})]}),Object(O.jsxs)("div",{className:"card-confirmation__withdraw",children:[Object(O.jsx)("p",{className:"card-confirmation__withdraw-buy",children:"Buy:"}),Object(O.jsxs)("p",{className:"card-confirmation__withdraw-quontity",children:[n," ",null===x||void 0===x?void 0:x.name]})]}),Object(O.jsxs)("div",{className:"card-confirmation__button",children:[Object(O.jsx)("button",{type:"button",disabled:f,className:"card-confirmation__button-cancel",onClick:function(){return h()},children:"Cancel"}),Object(O.jsx)("button",{type:"button",disabled:f,className:"card-confirmation__button-confirme",onClick:function(){return v(!0),"invoice"===l&&m(t,l,s,r).then((function(e){"Success"===e.message&&(v(!1),d("success"))})),void("withdraw"===l&&m(n,l,s,r).then((function(e){"Success"===e.message&&(v(!1),d("success"))})))},children:f?"Loading...":"Confirme"})]})]})},x=function(e){var t=e.setPage,n=e.setInvoicePayMethodId,a=e.handleChangeValue,i=e.setWithdrawPayMethodId,s=e.invoiceValue,r=e.withdrawValue,d=e.invoicePayMethods,u=e.withdrawPayMethods,l=e.isLoading,h=Object(c.useState)(!1),j=Object(o.a)(h,2),b=j[0],m=j[1];return Object(O.jsxs)("form",{className:"form-container",onSubmit:function(e){return function(e){e.preventDefault(),""!==s&&""!==r&&(t("conferm"),m(!1)),m(!0)}(e)},noValidate:!0,children:[Object(O.jsxs)("div",{className:"card-container",children:[Object(O.jsxs)("div",{className:"card-exchange",children:[Object(O.jsx)("h1",{className:"card-exchange__heading",children:"Sell"}),Object(O.jsx)("select",{name:"select",className:"card-exchange__select",onChange:function(e){n(+e.target.value)},children:d.map((function(e){return Object(O.jsx)("option",{value:e.id,children:e.name},e.id)}))}),Object(O.jsx)("input",{type:"number",name:"invoice",min:"0.01",value:s,placeholder:"write your numbers",className:"card-exchange__input",onChange:function(e){return a(e)}})]}),Object(O.jsxs)("div",{className:"card-exchange",children:[Object(O.jsx)("h1",{className:"card-exchange__heading",children:"Buy"}),Object(O.jsx)("select",{name:"select",className:"card-exchange__select",onChange:function(e){return i(+e.target.value)},children:u.map((function(e){return Object(O.jsx)("option",{value:e.id,children:e.name},e.id)}))}),Object(O.jsx)("input",{type:"number",name:"withdraw",min:"0.01",value:r,placeholder:"write your numbers",className:"card-exchange__input",onChange:function(e){return a(e)}})]})]}),b&&Object(O.jsx)("p",{children:"\u274cYou forgot to enter quantity of currencies\u274c"}),Object(O.jsx)("div",{className:"button-container",children:Object(O.jsx)("button",{className:"button-container__button",type:"submit",disabled:l,children:"Exchange"})})]})},g=function(){var e=Object(c.useState)(0),t=Object(o.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(0),s=Object(o.a)(i,2),d=s[0],l=s[1],m=Object(c.useState)(""),f=Object(o.a)(m,2),g=f[0],p=f[1],y=Object(c.useState)(""),_=Object(o.a)(y,2),N=_[0],M=_[1],P=Object(c.useState)(""),S=Object(o.a)(P,2),C=S[0],V=S[1],I=Object(c.useState)([]),k=Object(o.a)(I,2),E=k[0],q=k[1],B=Object(c.useState)([]),J=Object(o.a)(B,2),L=J[0],T=J[1],D=Object(c.useState)("form"),W=Object(o.a)(D,2),Y=W[0],H=W[1],z=Object(c.useState)(!1),A=Object(o.a)(z,2),F=A[0],G=A[1];Object(c.useEffect)((function(){G(!0),j("".concat(b,"/payMethods")).then((function(e){q(e.invoice),a(e.invoice[0].id),T(e.withdraw),l(e.withdraw[0].id),G(!1)}))}),[]);var K=Object(c.useCallback)(Object(r.a)((function(e,t,n,c){return e?(G(!0),function(e,t,n,c){var a=h.a.stringify({base:t,amount:c,invoicePayMethod:e,withdrawPayMethod:n});return j("".concat(b).concat("/payMethods/calculate?").concat(a))}(t,n,c,e).then((function(e){"invoice"===n&&(p(String(e.amount)),V("invoice"),G(!1)),"withdraw"===n&&(M(String(e.amount)),V("withdraw"),G(!1))}))):("invoice"===n&&p(""),"withdraw"===n&&M(""),null)}),500),[]),Q=Object(c.useCallback)((function(){M(""),p(""),a(E[0].id),l(L[0].id),H("form")}),[n,d]);return Object(O.jsxs)("div",{className:u()("app",{"app-loading":F}),children:["form"===Y&&Object(O.jsx)(x,{invoicePayMethods:E,withdrawPayMethods:L,setPage:H,setInvoicePayMethodId:a,handleChangeValue:function(e){var t=e.target,c=t.name,a=t.value;"invoice"===c&&M(a),"withdraw"===c&&p(a),K(a,n,c,d)},setWithdrawPayMethodId:l,withdrawValue:g,invoiceValue:N,isLoading:F}),"conferm"===Y&&Object(O.jsx)(w,{withdrawValue:g,payMethod:C,invoiceValue:N,invoicePayMethods:E,withdrawPayMethods:L,invoicePayMethodId:n,withdrawPayMethodId:d,setPage:H,reset:Q}),"success"===Y&&Object(O.jsx)(v,{reset:Q})]})};s.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(g,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.eeda604d.chunk.js.map